<script>
        let currentQuestion = 1;
        let totalScore = 0;
        const maxScore = 1000;
        let answers = [];
        let isSubmitted = false;
        let wasMutedManually = false;
        let heartLoop;
        let sparkleLoop;
        let pinInput = [];
        let attemptsLeft = 3;
        const correctPin = "5210"; // PIN: 5210

        const allQuestions = [
            { question: "1. Sayang... sayangkan b?", options: [{ text: "Mestilah sayang", score: 100, type: "correct" }, { text: "Hurmm", score: 0, type: "wrong" }] },
            { question: "2. Apa warna favourite b?", options: [{ text: "biru", score: 100, type: "correct" }, { text: "hitam", score: 75, type: "correct" }] },
            { question: "3. Favorite makanan yang b suka apa?", options: [{ text: "Nasi goreng cina", score: 50, type: "half" }, { text: "Nasi goreng kampung + telur mata goyang", score: 75, type: "correct" }, { text: "Kuey teow kungfu", score: 75, type: "correct" }, { text: "Nasi goreng pattaya", score: 100, type: "correct" }] },
            { question: "4. Bila kita mula mulakan bibit cinta?", options: [{ text: "19 Disember 2022", score: 100, type: "correct" }] },
            { question: "5. Suka ke tengok b senyum?", options: [{ text: "Tak", score: 0, type: "wrong" }, { text: "Sebab nampak hensem", score: 100, type: "correct" }, { text: "100% sukee gilerrr", score: 100, type: "correct" }] },
            { question: "6. Selalu tak sayang pikirkan b?", options: [{ text: "Iya sayangku", score: 100, type: "correct" }, { text: "Bila teringat je", score: 50, type: "half" }, { text: "Hm takk..", score: 0, type: "wrong" }] },
            { question: "7. Besar mana rasa kepedulian sayang kat b ni?", options: [{ text: "Besar Galaxy", score: 100, type: "correct" }, { text: "Separuh", score: 50, type: "half" }, { text: "Nape tanya", score: 0, type: "wrong" }] },
            { question: "8. Pernah tak... sayang <strong>terpikir/imaginasi</strong> tentang \"masa depan\" dengan b tak?", options: [{ text: "Banyak sangattt", score: 100, type: "correct" }, { text: "Kadang\" je", score: 50, type: "half" }, { text: "Jarang", score: 0, type: "wrong" }] },
            { question: "9. Berapa percent pentingnya b dalam hidup sayang?", options: [{ text: "25%", score: 0, type: "wrong" }, { text: "50%", score: 50, type: "half" }, { text: "75%", score: 50, type: "half" }, { text: "99.9%", score: 75, type: "correct" }, { text: "100%", score: 100, type: "correct" }] },
            { question: "10. Sayang betul-betul cintakan b?", options: [{ text: "Dengan sepenuh hati b", score: 100, type: "correct" }, { text: "Mungkin", score: 50, type: "half" }, { text: "Tak yakinlah", score: 0, type: "wrong" }] }
        ];

        document.addEventListener('DOMContentLoaded', function() {
            const lockOverlay = document.getElementById('lockOverlay');
            const introOverlay = document.getElementById('introOverlay');
            const finishOverlay = document.getElementById('finishOverlay');
            const coverOverlay = document.getElementById('coverOverlay');
            const mainContent = document.getElementById('mainContent');
            const backgroundLayer = document.getElementById('backgroundLayer');
            const backgroundMusic = document.getElementById('backgroundMusic');
            const birthdayMusic = document.getElementById('birthdayMusic');
            const welcomeSound = document.getElementById('welcomeSound');
            const awardsSound = document.getElementById('awardsSound');
            const clickSound = document.getElementById('clickSound');
            const video = document.getElementById('specialVideo');
            const bgVolume = document.getElementById('bgVolume');
            const clickVolume = document.getElementById('clickVolume');
            const introGif = document.querySelector('.intro-gif');
            const introTitle = document.getElementById('introTitle');
            const introSubtitle = document.getElementById('introSubtitle');
            const introText = document.getElementById('introText');
            const introHeartLayer = document.getElementById('introHeartLayer');

            backgroundMusic.volume = 0.75;
            birthdayMusic.volume = 0.75;
            clickSound.volume = 0.75;

            lockOverlay.classList.add('active');

            bgVolume.addEventListener('input', function() {
                const activeMusic = document.getElementById('loveLetter').style.display === 'block' ? birthdayMusic : backgroundMusic;
                activeMusic.volume = this.value / 100;
                if (activeMusic.volume === 0) {
                    document.getElementById('muteBtn').textContent = 'üîá';
                    document.getElementById('muteBtn').classList.add('muted');
                    wasMutedManually = true;
                } else {
                    document.getElementById('muteBtn').textContent = 'üîä';
                    document.getElementById('muteBtn').classList.remove('muted');
                    wasMutedManually = false;
                }
            });
            
            clickVolume.addEventListener('input', function() {
                clickSound.volume = this.value / 100;
            });
            
            introOverlay.addEventListener('click', function() {
                if (introOverlay.style.pointerEvents === 'auto') {
                    introOverlay.classList.add('fade-out');
                    welcomeSound.pause();
                    setTimeout(() => {
                        introOverlay.style.display = 'none';
                        mainContent.style.display = 'block';
                        mainContent.classList.add('fade-in');
                        createSoftBackground(backgroundLayer);
                        if (!wasMutedManually) backgroundMusic.play();
                        positionLoveHeart();
                    }, 500);
                }
            });

            finishOverlay.addEventListener('click', function() {
                if (finishOverlay.style.pointerEvents === 'auto') {
                    finishOverlay.classList.add('fade-out');
                    coverOverlay.classList.add('fade-out');
                    awardsSound.pause();
                    clearInterval(heartLoop);
                    clearInterval(sparkleLoop);
                    setTimeout(() => {
                        finishOverlay.style.display = 'none';
                        coverOverlay.style.display = 'none';
                        mainContent.style.display = 'block';
                        mainContent.classList.add('fade-in');
                        showLoveLetter();
                        if (!wasMutedManually) birthdayMusic.play();
                    }, 1500);
                }
            });

            video.addEventListener('play', function() {
                birthdayMusic.pause();
                document.getElementById('muteBtn').textContent = 'üîá';
                document.getElementById('muteBtn').classList.add('muted');
            });
            video.addEventListener('pause', function() {
                if (!wasMutedManually) {
                    birthdayMusic.play();
                    document.getElementById('muteBtn').textContent = 'üîä';
                    document.getElementById('muteBtn').classList.remove('muted');
                }
            });

            window.addEventListener('resize', positionLoveHeart);
        });

        function enterPin(num) {
            if (attemptsLeft <= 0) return;
            document.getElementById('clickSound').play();
            createLoveEffect(event);
            if (pinInput.length < 4) {
                pinInput.push(num);
                updatePinDisplay();
            }
        }

        function backspacePin() {
            if (attemptsLeft <= 0) return;
            document.getElementById('clickSound').play();
            createLoveEffect(event);
            if (pinInput.length > 0) {
                pinInput.pop();
                updatePinDisplay();
            }
        }

        function submitPin() {
            if (attemptsLeft <= 0) return;
            document.getElementById('clickSound').play();
            createLoveEffect(event);
            const lockOverlay = document.getElementById('lockOverlay');
            const introOverlay = document.getElementById('introOverlay');
            const introGif = document.querySelector('.intro-gif');
            const introTitle = document.getElementById('introTitle');
            const introSubtitle = document.getElementById('introSubtitle');
            const introText = document.getElementById('introText');
            const introHeartLayer = document.getElementById('introHeartLayer');
            const lockStatus = document.getElementById('lockStatus');

            if (pinInput.length !== 4) {
                lockStatus.textContent = "PIN mesti 4 nombor!";
                return;
            }

            const enteredPin = pinInput.join('');
            if (enteredPin === correctPin) {
                lockOverlay.classList.add('fade-out');
                setTimeout(() => {
                    lockOverlay.style.display = 'none';
                    introOverlay.classList.add('active');
                    document.getElementById('welcomeSound').play();
                    setTimeout(() => {
                        introGif.style.opacity = 1;
                        createSoftEmojis(introHeartLayer);
                        setTimeout(() => {
                            introGif.classList.add('float-up');
                            setTimeout(() => {
                                typeText(introTitle, "Welcome", 100, () => {
                                    setTimeout(() => {
                                        typeText(introSubtitle, "Nur Ariana Dazilah ~", 100, () => {
                                            setTimeout(() => {
                                                introText.textContent = "Tekan sahaja di mana-mana bahagian skrin";
                                                introText.style.opacity = 1;
                                                introText.classList.add('float-up-text');
                                                introText.classList.add('pop-out');
                                                introOverlay.style.pointerEvents = 'auto';
                                                startShakeTimer(introOverlay, introText, 'intro');
                                            }, 2000);
                                        });
                                    }, 1000);
                                });
                            }, 1000);
                        }, 500);
                    }, 100);
                }, 500);
            } else {
                attemptsLeft--;
                lockStatus.textContent = `PIN salah! Percubaan lagi: ${attemptsLeft}`;
                pinInput = [];
                updatePinDisplay();
                if (attemptsLeft <= 0) {
                    lockStatus.textContent = "Akses Ditolak!";
                    document.querySelectorAll('.lock-btn').forEach(btn => btn.disabled = true);
                }
            }
        }

        function updatePinDisplay() {
            const lockDisplay = document.getElementById('lockDisplay');
            lockDisplay.textContent = pinInput.map(() => '*').join(' ');
        }

        function createSoftBackground(layer) {
            const softSymbols = ['‚ù§', 'üå∏', 'üåº', '‚úø', '‚ùÄ', 'üíó', 'üå∑', 'üíû'];
            for (let i = 0; i < 70; i++) {
                const element = document.createElement('div');
                element.className = 'soft-element';
                element.textContent = softSymbols[Math.floor(Math.random() * softSymbols.length)];
                element.style.left = Math.random() * 100 + '%';
                element.style.top = Math.random() * 100 + '%';
                element.style.fontSize = (Math.random() * 20 + 12) + 'px';
                element.style.animationDuration = (Math.random() * 4 + 6) + 's';
                element.style.animationDelay = Math.random() * 3 + 's';
                layer.appendChild(element);
            }
        }

        function createSoftEmojis(layer) {
            const softSymbols = ['‚ù§', 'üå∏', 'üåº', 'üíñ'];
            for (let i = 0; i < 40; i++) {
                const emoji = document.createElement('div');
                emoji.className = 'soft-emoji';
                emoji.textContent = softSymbols[Math.floor(Math.random() * softSymbols.length)];
                emoji.style.left = Math.random() * 100 + '%';
                emoji.style.top = Math.random() * 100 + '%';
                emoji.style.fontSize = (Math.random() * 8 + 12) + 'px';
                layer.appendChild(emoji);
            }
        }

        function createHeartSplash(layer) {
            const symbols = ['‚ù§', 'üå∏'];
            const heart = document.createElement('div');
            heart.className = 'heart-splash';
            heart.textContent = symbols[Math.floor(Math.random() * 2)];
            heart.style.left = `${Math.random() * 80 + 10}%`;
            heart.style.top = '70%';
            heart.style.fontSize = `${Math.random() * 8 + 12}px`;
            heart.style.animation = `splash ${Math.random() * 1 + 1}s ease-out`;
            layer.appendChild(heart);
            setTimeout(() => heart.remove(), 2000);
        }

        function createLoveEffect(event) {
            const symbols = ['‚ù§', 'üå∏', 'üíñ'];
            const button = event.target;
            const rect = button.getBoundingClientRect();
            const love = document.createElement('div');
            love.className = 'love-effect';
            love.textContent = symbols[Math.floor(Math.random() * symbols.length)];
            love.style.left = `${rect.left + rect.width / 2}px`;
            love.style.top = `${rect.top + rect.height / 2}px`;
            document.body.appendChild(love);
            setTimeout(() => love.remove(), 1500);
        }

        function createSparkle(layer) {
            const sparkleSymbols = ['‚ú®', 'üå∏', 'üíñ', 'üåü', 'üí´', 'üåº'];
            for (let i = 0; i < 20; i++) {
                const sparkle = document.createElement('div');
                sparkle.className = 'sparkle';
                sparkle.textContent = sparkleSymbols[Math.floor(Math.random() * sparkleSymbols.length)];
                const isLeft = Math.random() < 0.5;
                sparkle.style.left = isLeft ? `${Math.random() * 10}%` : `${90 + Math.random() * 10}%`;
                sparkle.style.top = '100%';
                sparkle.style.fontSize = `${Math.random() * 10 + 12}px`;
                sparkle.style.animation = `sparkle ${Math.random() * 2 + 2}s ease-out`;
                sparkle.style.transform = `translateX(${isLeft ? Math.random() * 20 : -Math.random() * 20}%)`;
                layer.appendChild(sparkle);
                setTimeout(() => sparkle.remove(), 4000);
            }
        }

        function startHeartLoop(layer) {
            heartLoop = setInterval(() => {
                for (let i = 0; i < 3; i++) {
                    createHeartSplash(layer);
                }
            }, 2000);
        }

        function startSparkleLoop(layer) {
            sparkleLoop = setInterval(() => {
                createSparkle(layer);
            }, 1000);
        }

        function positionLoveHeart() {
            const container = document.getElementById('mainContent');
            const progressBar = document.getElementById('progressBar');
            const loveHeart = document.getElementById('loveHeart');
            
            if (container.style.display === 'block') {
                const containerRect = container.getBoundingClientRect();
                const progressRect = progressBar.getBoundingClientRect();
                loveHeart.style.left = `${containerRect.right +  10}px`;
                loveHeart.style.top = `${progressRect.bottom}px`;
            }
        }

        function updateLoveHeart(percentage) {
            const loveHeart = document.getElementById('loveHeart');
            const maxSize = 40;
            const minSize = 10;
            const growthRange = maxSize - minSize;
            let size = percentage <= 40 ? minSize + (growthRange * (percentage / 40)) : maxSize;
            loveHeart.style.fontSize = `${size}px`;
            loveHeart.style.transform = `translateY(-${percentage * 0.5}px)`;
        }

        function disableOptions(questionNum) {
            const buttons = document.querySelectorAll(`#question${questionNum} button`);
            buttons.forEach(btn => btn.disabled = true);
            const input = document.querySelector(`#question${questionNum} input`);
            if (input) input.disabled = true;
        }

        function selectAnswer(questionNum, score, button, type) {
            if (isSubmitted) return;
            document.getElementById('clickSound').play();
            createLoveEffect(event);
            const buttons = button.parentElement.querySelectorAll('button');
            buttons.forEach(btn => btn.className = '');
            button.classList.add(type);
            
            answers[questionNum-1] = {
                question: document.querySelector(`#question${questionNum} h3`).textContent,
                answer: button.textContent,
                type: type,
                score: score
            };
            
            totalScore += score;
            updateProgressBar();
            disableOptions(questionNum);
            document.getElementById(`question${questionNum}`).classList.remove('active');
            
            if (questionNum === 10) {
                document.getElementById('backgroundMusic').pause();
                document.getElementById('coverOverlay').classList.add('active');
                setTimeout(showFinishOverlay, 1500);
                document.getElementById('reviewBtn').style.display = 'block';
                sendEmail();
                isSubmitted = true;
                return;
            }
            
            currentQuestion++;
            document.getElementById(`question${currentQuestion}`).classList.add('active');
        }

        function showFinishOverlay() {
            const finishOverlay = document.getElementById('finishOverlay');
            const finishGif = document.querySelector('.finish-gif');
            const finishText = document.getElementById('finishText');
            const readyText = document.getElementById('readyText');
            const countdown = document.getElementById('countdown');
            const lockText = document.getElementById('lockText');
            const heartLayer = document.getElementById('heartLayer');
            const mainContent = document.getElementById('mainContent');

            mainContent.style.display = 'none';
            finishOverlay.style.display = 'flex';
            finishOverlay.classList.add('active');
            document.getElementById('awardsSound').play();
            startHeartLoop(heartLayer);
            startSparkleLoop(heartLayer);
            
            setTimeout(() => {
                finishGif.style.opacity = 1;
                setTimeout(() => {
                    finishGif.classList.add('float-up');
                    setTimeout(() => {
                        typeText(finishText, "Yeayy !! finally sayang dah sampai kat peringkat terakhir !", 100, () => {
                            finishText.classList.add('float-up-text');
                            setTimeout(() => {
                                typeText(readyText, "Sayang dah ready .. ?", 100, () => {
                                    readyText.classList.add('float-up-text');
                                    setTimeout(() => {
                                        startCountdown(countdown, () => {
                                            countdown.classList.add('float-up-text');
                                            setTimeout(() => {
                                                lockText.textContent = "Dah boleh tekan skrin...";
                                                lockText.style.opacity = 1;
                                                lockText.classList.add('float-up-text');
                                                lockText.classList.add('pop-out');
                                                finishOverlay.style.pointerEvents = 'auto';
                                                startShakeTimer(finishOverlay, lockText, 'finish');
                                            }, 500);
                                        });
                                    }, 500);
                                });
                            }, 2000);
                        });
                    }, 1000);
                }, 500);
            }, 1000);
        }

        function startCountdown(element, callback) {
            let count = 3;
            const countdownInterval = setInterval(() => {
                element.textContent = count;
                element.style.opacity = 1;
                element.classList.remove('float-up-text');
                setTimeout(() => element.classList.add('float-up-text'), 10);
                count--;
                if (count < 0) {
                    clearInterval(countdownInterval);
                    element.textContent = "‚Üì";
                    element.classList.add('arrow');
                    setTimeout(() => {
                        if (callback) callback();
                    }, 2000);
                }
            }, 2000);
        }

        function startShakeTimer(overlay, textElement, type) {
            let clicked = false;
            overlay.addEventListener('click', () => {
                clicked = true;
                clearInterval(shakeInterval);
            }, { once: true });
            const shakeInterval = setInterval(() => {
                if (!clicked && overlay.style.pointerEvents === 'auto') {
                    textElement.classList.add('shake-text');
                    setTimeout(() => textElement.classList.remove('shake-text'), 800);
                }
            }, 10000);
        }

        function typeText(element, text, speed = 100, callback) {
            let i = 0;
            element.textContent = '';
            element.style.opacity = 1;
            const interval = setInterval(() => {
                if (i < text.length) {
                    element.textContent += text.charAt(i);
                    i++;
                } else {
                    clearInterval(interval);
                    if (callback) callback();
                }
            }, speed);
        }

        function handleEnter(e, callback) {
            if (e.key === 'Enter') callback();
        }

        function checkColorAnswer() {
            if (isSubmitted) return;
            const answer = document.getElementById('colorAnswer').value.trim().toLowerCase();
            const submitButton = document.getElementById('submitColor');
            const inputField = document.getElementById('colorAnswer');
            
            if (!answer) {
                new Audio('error sound.mp3').play();
                if (navigator.vibrate) navigator.vibrate(200);
                submitButton.className = '';
                submitButton.classList.add('wrong');
                inputField.classList.add('shake');
                setTimeout(() => inputField.classList.remove('shake'), 500);
                return;
            }
            
            document.getElementById('clickSound').play();
            createLoveEffect(event);
            let score = 0;
            let type = 'wrong';
            if (answer.includes('biru')) { score = 100; type = 'correct'; }
            else if (answer.includes('hitam')) { score = 75; type = 'correct'; }
            
            submitButton.className = '';
            submitButton.classList.add(type);
            answers[1] = { question: document.querySelector('#question2 h3').textContent, answer, type, score };
            if (!answer.includes('biru') && !answer.includes('hitam')) {
                allQuestions[1].options.push({ text: answer, score, type });
            }
            
            totalScore += score;
            updateProgressBar();
            disableOptions(2);
            document.getElementById('question2').classList.remove('active');
            currentQuestion++;
            document.getElementById(`question${currentQuestion}`).classList.add('active');
        }

        function checkDateAnswer() {
            if (isSubmitted) return;
            const answer = document.getElementById('dateAnswer').value.trim().toLowerCase();
            const submitButton = document.getElementById('submitDate');
            const inputField = document.getElementById('dateAnswer');
            
            if (!answer) {
                new Audio('error sound.mp3').play();
                if (navigator.vibrate) navigator.vibrate(200);
                submitButton.className = '';
                submitButton.classList.add('wrong');
                inputField.classList.add('shake');
                setTimeout(() => inputField.classList.remove('shake'), 500);
                return;
            }
            
            document.getElementById('clickSound').play();
            createLoveEffect(event);
            let score = 0;
            let type = 'wrong';
            const datePattern = /(19\s*(th)?\s*(disember|december|dis|dec)(\s*(2022|22))?|(19)[./-]\s*(12|dis|dec)(\s*[./-]?\s*(2022|22))?)/i;
            if (datePattern.test(answer)) { score = 100; type = 'correct'; }
            
            submitButton.className = '';
            submitButton.classList.add(type);
            answers[3] = { question: document.querySelector('#question4 h3').textContent, answer, type, score };
            if (score === 0) allQuestions[3].options.push({ text: answer, score, type });
            
            totalScore += score;
            updateProgressBar();
            disableOptions(4);
            document.getElementById('question4').classList.remove('active');
            currentQuestion++;
            document.getElementById(`question${currentQuestion}`).classList.add('active');
        }

        function updateProgressBar() {
            const percentage = Math.min(Math.round((totalScore / maxScore) * 100), 100);
            const progressBar = document.getElementById('progressBar');
            progressBar.style.width = percentage + '%';
            if (percentage < 30) {
                progressBar.style.background = '#e74c3c';
            } else if (percentage < 60) {
                progressBar.style.background = '#ff9a9e';
            } else if (percentage < 80) {
                progressBar.style.background = '#3498db';
            } else {
                progressBar.style.background = '#2ecc71';
            }
            progressBar.textContent = `${percentage}%`;
            progressBar.classList.add('shake-progress');
            setTimeout(() => progressBar.classList.remove('shake-progress'), 500);
            updateLoveHeart(percentage);
        }

        function showLoveLetter() {
            const loveLetter = document.getElementById('loveLetter');
            loveLetter.style.display = 'block';
            loveLetter.scrollIntoView({ behavior: 'smooth' });
        }

        function sendEmail() {
            const emailBody = answers.map((ans, index) => 
                `${index + 1}. ${ans.question}\n   Jawapan: ${ans.answer} (${ans.score} markah)`
            ).join('\n\n') + `\n\nJumlah Skor: ${totalScore}/${maxScore} (${Math.round((totalScore / maxScore) * 100)}%)`;
            
            fetch('https://formspree.io/f/xqapwldd', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ email: 'mdanialarif07@gmail.com', message: emailBody })
            }).then(response => {
                if (response.ok) console.log('Email sent successfully');
                else console.error('Failed to send email');
            }).catch(error => console.error('Error:', error));
        }

        function showReview() {
            document.getElementById('clickSound').play();
            createLoveEffect(event);
            const reviewContent = document.getElementById('reviewContent');
            reviewContent.innerHTML = '';
            allQuestions.forEach((q, index) => {
                const qDiv = document.createElement('div');
                qDiv.className = 'review-question';
                qDiv.innerHTML = `<strong>${q.question}</strong>`;
                q.options.forEach(option => {
                    const isSelected = answers[index] && answers[index].answer === option.text;
                    const aDiv = document.createElement('div');
                    aDiv.className = `review-answer review-${option.type}${isSelected ? ' review-selected' : ''}`;
                    aDiv.innerHTML = `${option.text} (${option.score} markah)`;
                    qDiv.appendChild(aDiv);
                });
                reviewContent.appendChild(qDiv);
            });
            document.getElementById('reviewContainer').style.display = 'block';
            document.getElementById('reviewBtn').style.display = 'none';
            document.getElementById('loveLetter').style.display = 'none';
        }

        function hideReview() {
            document.getElementById('clickSound').play();
            createLoveEffect(event);
            const reviewContainer = document.getElementById('reviewContainer');
            const reviewBtn = document.getElementById('reviewBtn');
            const loveLetter = document.getElementById('loveLetter');
            reviewContainer.style.display = 'none';
            reviewBtn.style.display = 'block';
            loveLetter.style.display = 'block';
        }

        function toggleMute() {
            document.getElementById('clickSound').play();
            createLoveEffect(event);
            const backgroundMusic = document.getElementById('backgroundMusic');
            const birthdayMusic = document.getElementById('birthdayMusic');
            const muteBtn = document.getElementById('muteBtn');
            const bgVolume = document.getElementById('bgVolume');
            const activeMusic = document.getElementById('loveLetter').style.display === 'block' ? birthdayMusic : backgroundMusic;
            
            if (activeMusic.paused || activeMusic.muted) {
                activeMusic.muted = false;
                activeMusic.play();
                muteBtn.textContent = 'üîä';
                muteBtn.classList.remove('muted');
                bgVolume.value = activeMusic.volume * 100;
                wasMutedManually = false;
            } else {
                activeMusic.muted = true;
                activeMusic.pause();
                muteBtn.textContent = 'üîá';
                muteBtn.classList.add('muted');
                bgVolume.value = 0;
                wasMutedManually = true;
            }
        }

        function showVideo() {
            document.getElementById('clickSound').play();
            createLoveEffect(event);
            const videoContainer = document.getElementById('videoContainer');
            const playBtn = document.querySelector('.play-video-btn');
            videoContainer.style.display = 'block';
            playBtn.style.display = 'none';
            document.getElementById('specialVideo').play();
            videoContainer.scrollIntoView({ behavior: 'smooth' });
        }

        function hideVideo() {
            document.getElementById('clickSound').play();
            createLoveEffect(event);
            const videoContainer = document.getElementById('videoContainer');
            const playBtn = document.querySelector('.play-video-btn');
            const specialVideo = document.getElementById('specialVideo');
            specialVideo.pause();
            videoContainer.style.display = 'none';
            playBtn.style.display = 'block';
            document.getElementById('loveLetter').scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>
